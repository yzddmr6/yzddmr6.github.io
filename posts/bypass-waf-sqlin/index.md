# SQL注入“万能”Bypass


<meta name="referrer" content="no-referrer" />

## 前言

前几天晚上做了一个梦，梦里进行了一些测试，今天觉得应该记录一下。

本文纯属虚构，如有雷同纯属放屁。

## 正文

梦里发现了一处mssql报错注入

![img](https://cdn.nlark.com/yuque/0/2021/png/1599908/1623900391935-256ff6c9-bba7-4081-8f98-b5f2dc6b6a4d.png)

然后发现有云锁

云锁.jpg（假装有图）

用星球里的脚本生成垃圾数据

如果是POST型就直接把垃圾数据放到你要注入的字段前后，如果是GET型就把他转为POST型再放垃圾数据。

![img](https://cdn.nlark.com/yuque/0/2021/png/1599908/1623900392095-e641e47c-5d60-401a-b0f4-d00d48db1550.png)

第一次可能生成太少了，还是被云锁drop包

![img](https://cdn.nlark.com/yuque/0/2021/png/1599908/1623900392216-f8a0357e-e425-4062-8f2c-27695fe179f1.png)

多粘贴几次，最后发现在数据包到30KB左右就可以正常注入了

![img](https://cdn.nlark.com/yuque/0/2021/png/1599908/1623900392320-25290620-b2c7-4dde-a4ab-15e2888ddd49.png)

然后就可以查数据了

![img](https://cdn.nlark.com/yuque/0/2021/png/1599908/1623900392416-d648b07b-f152-4ffb-a05f-d44afda79893.png)

### 测试数据

目前为止的bypass测试数据：

```
云锁：30KB
宝塔：30KB
阿里云：200+键值对
安全狗没测过，有空测一下
```

建议先抓包手工试一下到底多少垃圾数据合适，没问题之后再上sqlmap，不然容易ban ip

### 几个问题

- 为什么不直接在get上加垃圾数据？
- 因为GET型有长度限制，有时候还没加到能bypass的程度服务器就报错。

- 为什么不用一个超长字符串要用这么多键值对？
- 因为经过测试，超长字符串对于阿里云没用，超多垃圾键值对才有用。

- 适用类型有哪些？
- 在梦里的测试中本方法对于市面上绝大多数waf都可以用，数据包大小区别而已。

## 最后

然后梦就醒了，收拾一下准备去工地搬砖了。
